(()=>{var e={};e.id=380,e.ids=[380],e.modules={54:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>o});var r=s(5239),a=s(8088),i=s(8170),n=s.n(i),d=s(893),l={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);s.d(t,l);let o={children:["",{children:["booking-admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,7146)),"/app/frontend/src/app/booking-admin/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,4431)),"/app/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/app/frontend/src/app/booking-admin/page.tsx"],m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/booking-admin/page",pathname:"/booking-admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1169:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var r=s(687),a=s(3210),i=s(8730),n=s(228),d=s(8869),l=s(2688);let o=(0,l.A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),c=(0,l.A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var m=s(2557);function p(){let[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)(null),[p,x]=(0,a.useState)([]),[u,h]=(0,a.useState)(new Date().toISOString().split("T")[0]),[g,b]=(0,a.useState)(!1),[v,y]=(0,a.useState)(null),[f,j]=(0,a.useState)(!1),N=e=>{let t=[];for(let s=9;s<17;s++)for(let r=0;r<60;r+=30){let a=`${s.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`,i=k(a,e);w(i)<=w("17:00")&&t.push({time:a,available:!0,duration:e,endTime:i})}return t},w=e=>{let[t,s]=e.split(":").map(Number);return 60*t+s},k=(e,t)=>{let s=w(e)+t,r=Math.floor(s/60);return`${r.toString().padStart(2,"0")}:${(s%60).toString().padStart(2,"0")}`},S=e=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(e).getDay()],_=async(e,t)=>{if(s)try{let r={client_id:"admin-booking",service_id:s.id,employee_id:e,date:u,time:t.time,notes:`Duration: ${s.duration} minutes (${t.time} - ${t.endTime})`};if(!(await fetch("/api/appointments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)throw Error("Failed to create booking");alert("Booking created successfully!")}catch(e){alert("Failed to create booking"),console.error(e)}},A=(e,t)=>{let s=S(t);return e.availability_days.includes(s)};return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(m.A,{darkMode:f}),(0,r.jsx)("div",{className:"ml-64 p-8",children:(0,r.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Booking Administration"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Manage appointments by service, therapist availability, and time slots"})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"1. Select Service"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(e=>(0,r.jsxs)("div",{onClick:()=>l(e),className:`p-4 border rounded-lg cursor-pointer transition-colors ${s?.id===e.id?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"}`,children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,r.jsx)(i.A,{className:"w-4 h-4 text-gray-500"}),(0,r.jsxs)("span",{children:[e.duration," min"]})]}),(0,r.jsxs)("div",{className:"text-purple-600 font-medium",children:["$",e.price]})]})]},e.id))})]}),s&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"2. Select Date"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(n.A,{className:"w-5 h-5 text-gray-500"}),(0,r.jsx)("input",{type:"date",value:u,onChange:e=>h(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),(0,r.jsx)("span",{className:"text-gray-600",children:S(u)})]})]}),s&&p.length>0&&(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"3. Available Therapists & Time Slots"}),(0,r.jsxs)("div",{className:"text-sm text-gray-600 mb-4",children:["Service: ",(0,r.jsx)("span",{className:"font-medium",children:s.name}),"(",s.duration," minutes) - ",S(u)]}),(0,r.jsx)("div",{className:"space-y-6",children:p.map(e=>{let t=A(e,u),a=N(s.duration);return(0,r.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(d.A,{className:"w-5 h-5 text-gray-500"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:e.full_name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Employee #",e.employee_number]}),(0,r.jsxs)("p",{className:"text-sm text-gray-500",children:["Specialties: ",e.expertise.join(", ")]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[t?(0,r.jsx)(o,{className:"w-5 h-5 text-green-500"}):(0,r.jsx)(c,{className:"w-5 h-5 text-red-500"}),(0,r.jsx)("span",{className:`text-sm font-medium ${t?"text-green-600":"text-red-600"}`,children:t?"Available":"Not Available"})]})]}),t&&(0,r.jsx)("div",{className:"grid grid-cols-4 md:grid-cols-6 lg:grid-cols-8 gap-2",children:a.map((t,s)=>(0,r.jsxs)("button",{onClick:()=>_(e.id,t),disabled:!t.available,className:`p-2 text-sm border rounded transition-colors ${t.available?"border-green-300 bg-green-50 hover:bg-green-100 text-green-700":"border-gray-200 bg-gray-50 text-gray-400 cursor-not-allowed"}`,children:[(0,r.jsx)("div",{className:"font-medium",children:t.time}),(0,r.jsxs)("div",{className:"text-xs",children:["-",t.endTime]})]},s))}),!t&&(0,r.jsxs)("div",{className:"text-center py-4 text-gray-500",children:["Therapist not available on ",S(u)]})]},e.id)})})]}),s&&0===p.length&&!g&&(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)(d.A,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Qualified Therapists"}),(0,r.jsxs)("p",{className:"text-gray-600",children:['No therapists are qualified to perform "',s.name,'" service.']})]})}),g&&(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm p-6",children:(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Loading..."})]})}),v&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,r.jsx)("p",{className:"text-red-700",children:v})})]})})]})}},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3213:(e,t,s)=>{Promise.resolve().then(s.bind(s,7146))},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4829:(e,t,s)=>{Promise.resolve().then(s.bind(s,1169))},7146:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/app/frontend/src/app/booking-admin/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/app/frontend/src/app/booking-admin/page.tsx","default")},8869:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(2688).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[447,496,433,908],()=>s(54));module.exports=r})();