(()=>{var e={};e.id=85,e.ids=[85],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1490:(e,t,r)=>{Promise.resolve().then(r.bind(r,4491))},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4491:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(687),a=r(3210),l=r(6474),n=r(2557);function i(){let[e,t]=(0,a.useState)([]),[r,i]=(0,a.useState)(!0),[o,d]=(0,a.useState)(null),[c,p]=(0,a.useState)(new Date),[x,m]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),[g,b]=(0,a.useState)(!1),[v,j]=(0,a.useState)(null),[f,y]=(0,a.useState)([]),[N,w]=(0,a.useState)([]),[M,A]=(0,a.useState)([]),[P,C]=(0,a.useState)({client_id:"",service_id:"",employee_id:"",date:"",time:"10:00 AM",notes:""}),S=async e=>{e.preventDefault();try{let e=await fetch("/api/appointments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)});if(!e.ok)throw Error("Failed to create appointment");let t=await e.json();console.log("âœ… Appointment created:",t),C({client_id:"",service_id:"",employee_id:"",date:"",time:"10:00 AM",notes:""}),h(!1),await k()}catch(e){console.error("âŒ Error creating appointment:",e),d(e instanceof Error?e.message:"Failed to create appointment")}},k=async()=>{try{i(!0);let e="/api/records";console.log("\uD83D\uDD0D Fetching via Next.js proxy:",e);let r=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}});if(console.log("\uD83D\uDD0D Response status:",r.status),!r.ok){let e=await r.text();throw console.error("âŒ Response error:",e),Error(`HTTP ${r.status}: ${r.statusText}`)}let s=await r.json();console.log("\uD83D\uDD0D Total records via proxy:",s.length);let a=s.filter(e=>e.lastVisit);console.log("\uD83D\uDD0D Records with dates:",a.length);let l=a.filter(e=>e.lastVisit?.includes("2025-07"));console.log("\uD83D\uDD0D July appointments detail:"),l.forEach(e=>{console.log(`  - ${e.name||e.id.slice(-4)}: ${e.lastVisit}`)});let n=a.map(e=>({id:e.id,title:e.preferredService||e.name||`Appointment ${e.id.slice(-4)}`,client:e.name||`Client ${e.id.slice(-4)}`,service:e.preferredService||"Service",date:e.lastVisit||"",status:e.tags?.[0]||"scheduled",color:_(e.tags?.[0]||"scheduled"),therapist:e.email||"Therapist",time:e.phone||"10:00 AM",price:e.totalSpent||0,notes:e.notes||""}));console.log("\uD83D\uDD0D Transformed appointments:",n.length),console.log("\uD83D\uDD0D July transformed appointments:"),n.filter(e=>e.date.includes("2025-07")).forEach(e=>{console.log(`  - ${e.client}: ${e.date}`)}),t(n),d(null),console.log("âœ… Successfully loaded appointments via proxy!")}catch(e){console.error("âŒ Proxy connection failed:",e),d(`Connection failed via proxy: ${e instanceof Error?e.message:"Unknown error"}`)}finally{i(!1)}},_=e=>{switch(e.toLowerCase()){case"completed":return"bg-green-500";case"scheduled":return"bg-blue-500";case"cancelled":return"bg-red-500";default:return"bg-purple-500"}},$=t=>{let r=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),l=`${r}-${s}-${a}`,n=e.filter(e=>e.date.split("T")[0]===l);return l.includes("2025-07")&&(console.log(`ðŸ“… ${l}: ${n.length} appointments`),n.length>0&&console.log(`   - Appointments: ${n.map(e=>e.client).join(", ")}`)),n};return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-pink-50 flex",children:[(0,s.jsx)(n.A,{darkMode:x}),(0,s.jsx)("div",{className:"flex-1 p-6",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Calendar"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Manage your appointments from Airtable"})]}),(0,s.jsxs)("button",{onClick:()=>h(!0),className:"flex items-center space-x-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700",children:[(0,s.jsx)(l.A,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Add Appointment"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-purple-100 p-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("button",{onClick:()=>p(new Date(c.getFullYear(),c.getMonth()-1)),className:"p-2 hover:bg-gray-100 rounded-lg",children:"â†"}),(0,s.jsxs)("h2",{className:"text-xl font-semibold text-gray-900",children:[["January","February","March","April","May","June","July","August","September","October","November","December"][c.getMonth()]," ",c.getFullYear()]}),(0,s.jsx)("button",{onClick:()=>p(new Date(c.getFullYear(),c.getMonth()+1)),className:"p-2 hover:bg-gray-100 rounded-lg",children:"â†’"})]}),r?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading appointments from Airtable..."})]}):o?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsxs)("p",{className:"text-red-600 mb-2",children:["Error: ",o]}),(0,s.jsx)("button",{onClick:k,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"grid grid-cols-7 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,s.jsx)("div",{className:"p-2 text-center text-sm font-medium text-gray-500",children:e},e))}),(0,s.jsx)("div",{className:"grid grid-cols-7 gap-0 border border-gray-200 rounded-lg overflow-hidden",children:(e=>{let t=e.getFullYear(),r=e.getMonth(),s=new Date(t,r,1),a=new Date(t,r+1,0).getDate(),l=s.getDay(),n=[];for(let e=0;e<l;e++)n.push(null);for(let e=1;e<=a;e++)n.push(new Date(t,r,e));return n})(c).map((e,t)=>{let r=e?$(e):[],a=e&&e.toDateString()===new Date().toDateString();return(0,s.jsx)("div",{className:`min-h-32 p-2 border-r border-b border-gray-200 ${e?"hover:bg-gray-50 cursor-pointer":"bg-gray-50"} ${a?"bg-purple-50":""}`,children:e&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:`text-sm font-medium mb-1 ${a?"text-purple-600 font-bold":"text-gray-900"}`,children:e.getDate()}),(0,s.jsxs)("div",{className:"space-y-1",children:[r.slice(0,3).map(e=>(0,s.jsx)("div",{className:`text-white text-xs p-1 rounded font-bold cursor-pointer hover:opacity-80 transition-opacity ${e.color}`,title:`${e.client} - ${e.service}`,onClick:()=>{j(e),b(!0)},children:e.client},e.id)),r.length>3&&(0,s.jsxs)("div",{className:"text-xs text-purple-600 font-bold",children:["+",r.length-3," more"]})]})]})},t)})})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-purple-100 p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Appointment Statistics"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:e.length}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Total Appointments"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.filter(e=>e.date.includes("2025-07")).length}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"July Appointments"})]}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.filter(e=>"completed"===e.status.toLowerCase()).length}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Completed"})]})]})]})]})}),u&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-lg max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add New Appointment"}),(0,s.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Client *"}),(0,s.jsxs)("select",{value:P.client_id,onChange:e=>C(t=>({...t,client_id:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"Select Client"}),f.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service *"}),(0,s.jsxs)("select",{value:P.service_id,onChange:e=>C(t=>({...t,service_id:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"Select Service"}),N.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Therapist *"}),(0,s.jsxs)("select",{value:P.employee_id,onChange:e=>C(t=>({...t,employee_id:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"",children:"Select Therapist"}),M.map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appointment Date *"}),(0,s.jsx)("input",{type:"date",value:P.date,onChange:e=>C(t=>({...t,date:e.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time"}),(0,s.jsxs)("select",{value:P.time,onChange:e=>C(t=>({...t,time:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[(0,s.jsx)("option",{value:"9:00 AM",children:"9:00 AM"}),(0,s.jsx)("option",{value:"9:30 AM",children:"9:30 AM"}),(0,s.jsx)("option",{value:"10:00 AM",children:"10:00 AM"}),(0,s.jsx)("option",{value:"10:30 AM",children:"10:30 AM"}),(0,s.jsx)("option",{value:"11:00 AM",children:"11:00 AM"}),(0,s.jsx)("option",{value:"11:30 AM",children:"11:30 AM"}),(0,s.jsx)("option",{value:"12:00 PM",children:"12:00 PM"}),(0,s.jsx)("option",{value:"12:30 PM",children:"12:30 PM"}),(0,s.jsx)("option",{value:"1:00 PM",children:"1:00 PM"}),(0,s.jsx)("option",{value:"1:30 PM",children:"1:30 PM"}),(0,s.jsx)("option",{value:"2:00 PM",children:"2:00 PM"}),(0,s.jsx)("option",{value:"2:30 PM",children:"2:30 PM"}),(0,s.jsx)("option",{value:"3:00 PM",children:"3:00 PM"}),(0,s.jsx)("option",{value:"3:30 PM",children:"3:30 PM"}),(0,s.jsx)("option",{value:"4:00 PM",children:"4:00 PM"}),(0,s.jsx)("option",{value:"4:30 PM",children:"4:30 PM"}),(0,s.jsx)("option",{value:"5:00 PM",children:"5:00 PM"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Notes"}),(0,s.jsx)("textarea",{value:P.notes,onChange:e=>C(t=>({...t,notes:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Additional notes for the appointment..."})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{h(!1),C({client_id:"",service_id:"",employee_id:"",date:"",time:"10:00 AM",notes:""})},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-200",children:"Cancel"}),(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-lg hover:bg-purple-700",children:"Create Appointment"})]})]})]})})}),g&&v&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-lg max-w-lg w-full mx-4",children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Appointment Details"}),(0,s.jsx)("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:"âœ•"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"Client Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Client Name"}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:v.client})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Status"}),(0,s.jsx)("span",{className:`inline-block px-2 py-1 rounded-full text-xs font-medium ${"completed"===v.status.toLowerCase()?"bg-green-100 text-green-800":"scheduled"===v.status.toLowerCase()?"bg-blue-100 text-blue-800":"cancelled"===v.status.toLowerCase()?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:v.status})]})]})]}),(0,s.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"Appointment Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Service"}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:v.service})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Date"}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:new Date(v.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Time"}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:v.time})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Therapist"}),(0,s.jsx)("p",{className:"font-medium text-gray-900",children:v.therapist})]})]})]}),(0,s.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"Pricing"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Total Price"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["$",v.price]})]})]}),v.notes&&(0,s.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-800 mb-2",children:"Notes"}),(0,s.jsx)("p",{className:"text-gray-700",children:v.notes})]}),(0,s.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,s.jsx)("button",{onClick:()=>b(!1),className:"flex-1 px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 border border-gray-300 rounded-lg hover:bg-gray-200",children:"Close"}),(0,s.jsx)("button",{onClick:()=>{b(!1)},className:"flex-1 px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-lg hover:bg-purple-700",children:"Edit Appointment"})]})]})]})})})]})}},4728:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,pages:()=>c,routeModule:()=>x,tree:()=>d});var s=r(5239),a=r(8088),l=r(8170),n=r.n(l),i=r(893),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let d={children:["",{children:["calendar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9741)),"/app/frontend/src/app/calendar/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,4431)),"/app/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/app/frontend/src/app/calendar/page.tsx"],p={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/calendar/page",pathname:"/calendar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6474:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(2688).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},8442:(e,t,r)=>{Promise.resolve().then(r.bind(r,9741))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9551:e=>{"use strict";e.exports=require("url")},9741:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/app/frontend/src/app/calendar/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/app/frontend/src/app/calendar/page.tsx","default")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[447,496,433,908],()=>r(4728));module.exports=s})();