(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[745],{5060:(e,s,t)=>{"use strict";t.d(s,{A:()=>y});var a=t(5155),l=t(2115),r=t(5695),n=t(7340),c=t(1366),i=t(7580),d=t(3562),x=t(4186),m=t(2318),o=t(9420),h=t(2713),j=t(5868),g=t(3332),u=t(381),p=t(3052),N=t(2355),f=t(4416),b=t(4783);function y(e){let{darkMode:s}=e,t=(0,r.useRouter)(),y=(0,r.usePathname)(),[v,w]=(0,l.useState)(!1),[A,k]=(0,l.useState)(!1),C=[{name:"Dashboard",href:"/",icon:n.A},{name:"Conversations",href:"/conversations",icon:c.A},{name:"Clients",href:"/clients",icon:i.A},{name:"Calendar",href:"/calendar",icon:d.A},{name:"Booking Admin",href:"/booking-admin",icon:x.A},{name:"Employees",href:"/employees",icon:m.A},{name:"Voice Calls",href:"/voice-calls",icon:o.A},{name:"Analytics",href:"/analytics",icon:h.A},{name:"Revenue",href:"/revenue",icon:j.A},{name:"Promotions",href:"/promotions",icon:g.A},{name:"Settings",href:"/settings",icon:u.A}],_=e=>"/"===e?"/"===y:y.startsWith(e);return(0,a.jsxs)(a.Fragment,{children:[A&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>k(!1)}),(0,a.jsx)("div",{className:"fixed inset-y-0 left-0 z-40 bg-white border-r border-gray-200 transition-all duration-300 ".concat(v?"w-16":"w-64"," ").concat(A?"translate-x-0":"-translate-x-full"," lg:translate-x-0"),children:(0,a.jsxs)("div",{className:"flex h-full flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4",children:[!v&&(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-purple-600 rounded-lg flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-bold text-sm",children:"S"})}),(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:"Serena"})]}),(0,a.jsx)("button",{onClick:()=>w(!v),className:"hidden lg:flex p-1 rounded-lg hover:bg-gray-100 text-gray-500",children:v?(0,a.jsx)(p.A,{className:"w-5 h-5"}):(0,a.jsx)(N.A,{className:"w-5 h-5"})}),(0,a.jsx)("button",{onClick:()=>k(!1),className:"lg:hidden p-1 rounded-lg hover:bg-gray-100 text-gray-500",children:(0,a.jsx)(f.A,{className:"w-5 h-5"})})]}),(0,a.jsx)("nav",{className:"flex-1 px-4 space-y-2",children:C.map(e=>{let s=e.icon;return(0,a.jsxs)("button",{onClick:()=>{t.push(e.href),k(!1)},className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors ".concat(_(e.href)?"bg-purple-100 text-purple-600":"text-gray-700 hover:bg-gray-100"),children:[(0,a.jsx)(s,{className:"w-5 h-5 flex-shrink-0"}),!v&&(0,a.jsx)("span",{className:"text-sm",children:e.name})]},e.name)})}),(0,a.jsxs)("div",{className:"p-4 border-t border-gray-200",children:[(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),!v&&(0,a.jsx)("span",{children:"Online"})]}),!v&&(0,a.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"Version 1.0.0"})]})]})}),(0,a.jsx)("button",{onClick:()=>k(!0),className:"fixed top-4 left-4 z-50 lg:hidden p-2 rounded-lg bg-white shadow-lg border border-gray-200",children:(0,a.jsx)(b.A,{className:"w-5 h-5"})})]})}},8495:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>N});var a=t(5155),l=t(2115),r=t(5060),n=t(3904),c=t(9397),i=t(2713),d=t(3109),x=t(8500),m=t(5868),o=t(9074),h=t(7580),j=t(6785),g=t(8564),u=t(4186),p=t(4416);function N(){let[e,s]=(0,l.useState)(null),[t,N]=(0,l.useState)(!0),[f,b]=(0,l.useState)(null),[y,v]=(0,l.useState)("month");(0,l.useEffect)(()=>{w()},[y]);let w=async()=>{N(!0),b(null);try{let e=await fetch("/api/analytics?range=".concat(y));if(!e.ok)throw Error("Failed to fetch analytics");let t=await e.json();s(t)}catch(e){b("Failed to load analytics data"),console.error("Analytics error:",e)}finally{N(!1)}},A=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),k=e=>"".concat(e>0?"+":"").concat(e.toFixed(1),"%");return t?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50/50",children:[(0,a.jsx)(r.A,{darkMode:!1}),(0,a.jsx)("div",{className:"ml-64 flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(n.A,{className:"w-8 h-8 text-blue-500 animate-spin mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading analytics..."})]})})]}):f?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50/50",children:[(0,a.jsx)(r.A,{darkMode:!1}),(0,a.jsx)("div",{className:"ml-64 flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)(c.A,{className:"w-8 h-8 text-red-500"})}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Failed to Load Analytics"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:f}),(0,a.jsx)("button",{onClick:w,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})]})})]}):e?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50/50",children:[(0,a.jsx)(r.A,{darkMode:!1}),(0,a.jsx)("div",{className:"ml-64 p-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Analytics Dashboard"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Track your business performance and insights"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("select",{value:y,onChange:e=>v(e.target.value),className:"px-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-white",children:[(0,a.jsx)("option",{value:"today",children:"Today"}),(0,a.jsx)("option",{value:"week",children:"Last 7 Days"}),(0,a.jsx)("option",{value:"month",children:"Last Month"}),(0,a.jsx)("option",{value:"quarter",children:"Last 3 Months"}),(0,a.jsx)("option",{value:"half_year",children:"Last 6 Months"}),(0,a.jsx)("option",{value:"year",children:"Yearly"})]}),(0,a.jsx)("button",{onClick:w,className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:(0,a.jsx)(n.A,{className:"w-5 h-5"})})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Revenue"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:A(e.revenue.total)}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[e.revenue.growth>=0?(0,a.jsx)(d.A,{className:"w-4 h-4 text-green-500 mr-1"}):(0,a.jsx)(x.A,{className:"w-4 h-4 text-red-500 mr-1"}),(0,a.jsx)("span",{className:"text-sm font-medium ".concat(e.revenue.growth>=0?"text-green-600":"text-red-600"),children:k(e.revenue.growth)})]})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(m.A,{className:"w-6 h-6 text-green-600"})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Appointments"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.appointments.total}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(o.A,{className:"w-4 h-4 text-blue-500 mr-1"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[e.appointments.completion_rate.toFixed(1),"% completion rate"]})]})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(o.A,{className:"w-6 h-6 text-blue-600"})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Total Clients"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.clients.total}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(h.A,{className:"w-4 h-4 text-purple-500 mr-1"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[e.clients.new_in_period," new in period"]})]})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(h.A,{className:"w-6 h-6 text-purple-600"})})]})}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Avg per Appointment"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:A(e.revenue.avg_appointment_value)}),(0,a.jsxs)("div",{className:"flex items-center mt-2",children:[(0,a.jsx)(j.A,{className:"w-4 h-4 text-orange-500 mr-1"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:[e.clients.retention_rate.toFixed(1),"% retention"]})]})]}),(0,a.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:(0,a.jsx)(j.A,{className:"w-6 h-6 text-orange-600"})})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Top Services"}),(0,a.jsx)("div",{className:"space-y-4",children:e.services.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-blue-600",children:s+1})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.bookings," bookings"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:A(e.revenue)}),(0,a.jsxs)("div",{className:"flex items-center",children:[e.growth>=0?(0,a.jsx)(d.A,{className:"w-3 h-3 text-green-500 mr-1"}):(0,a.jsx)(x.A,{className:"w-3 h-3 text-red-500 mr-1"}),(0,a.jsx)("span",{className:"text-xs ".concat(e.growth>=0?"text-green-600":"text-red-600"),children:k(e.growth)})]})]})]},e.name))})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Top Performers"}),(0,a.jsx)("div",{className:"space-y-4",children:e.employees.slice(0,5).map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-sm font-medium text-purple-600",children:s+1})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.appointments," appointments"]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:A(e.revenue)}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(g.A,{className:"w-3 h-3 text-yellow-500 mr-1"}),(0,a.jsxs)("span",{className:"text-xs text-gray-600",children:[e.utilization.toFixed(1),"% utilization"]})]})]})]},e.name))})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Appointment Status Distribution"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)(u.A,{className:"w-8 h-8 text-green-600"})}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.appointments.completed}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Completed"}),(0,a.jsxs)("p",{className:"text-xs text-green-600 mt-1",children:[e.appointments.completion_rate.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)(o.A,{className:"w-8 h-8 text-blue-600"})}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.appointments.scheduled}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Scheduled"}),(0,a.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:[(e.appointments.scheduled/e.appointments.total*100).toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)(p.A,{className:"w-8 h-8 text-red-600"})}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.appointments.cancelled}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Cancelled"}),(0,a.jsxs)("p",{className:"text-xs text-red-600 mt-1",children:[e.appointments.cancellation_rate.toFixed(1),"%"]})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:(0,a.jsx)(i.A,{className:"w-8 h-8 text-gray-600"})}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.appointments.total}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Total"}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"All appointments"})]})]})]})]})})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50/50",children:[(0,a.jsx)(r.A,{darkMode:!1}),(0,a.jsx)("div",{className:"ml-64 flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(i.A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Analytics Data"}),(0,a.jsx)("p",{className:"text-gray-600",children:"No data available for the selected time range."})]})})]})}},9964:(e,s,t)=>{Promise.resolve().then(t.bind(t,8495))}},e=>{var s=s=>e(e.s=s);e.O(0,[710,441,684,358],()=>s(9964)),_N_E=e.O()}]);